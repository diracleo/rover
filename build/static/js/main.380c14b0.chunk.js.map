{"version":3,"sources":["utils.js","App.js","reportWebVitals.js","index.js"],"names":["isResponseOk","response","ok","Promise","reject","Error","json","ex","convertNippleData","data","modifier","direction","x","y","Math","round","force","App","drive","useRef","steer","managerDrive","managerSteer","driveValue","steerValue","driveValuePrev","steerValuePrev","commandTimer","useEffect","optionsDrive","zone","current","lockY","shape","nipplejs","create","optionsSteer","lockX","on","evt","setInterval","q","fetch","then","parseInt","catch","error","_jsx","className","children","_jsxs","id","ref","reportWebVitals","onPerfEntry","Function","_ref","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","React","StrictMode","document","getElementById"],"mappings":"kLAAO,MAAMA,EAAeC,IAC1B,IAAIA,EAASC,GAOX,OAAOC,QAAQC,OAAO,IAAIC,MAAM,UANhC,IACD,OAAOJ,EAASK,MAClB,CAAE,MAAMC,GACN,OAAOJ,QAAQC,OAAO,IAAIC,MAAM,SAC/B,G,yCCAJ,MAAMG,EAAqBC,IACzB,IAAIC,EAAW,EAIf,MAHyB,SAArBD,EAAKE,UAAUC,GAAqC,SAArBH,EAAKE,UAAUE,IAChDH,GAAY,GAEPI,KAAKC,MAAMN,EAAKO,MAAQN,EAAW,MAwE7BO,MArEf,WACE,MAAMC,EAAQC,iBAAO,MACfC,EAAQD,iBAAO,MACfE,EAAeF,iBAAO,MACtBG,EAAeH,iBAAO,MACtBI,EAAaJ,iBAAO,GACpBK,EAAaL,iBAAO,GACpBM,EAAiBN,iBAAO,GACxBO,EAAiBP,iBAAO,GACxBQ,EAAeR,iBAAO,MAkD5B,OAhDAS,oBAAU,KACR,MAAMC,EAAe,CACnBC,KAAMZ,EAAMa,QACZC,OAAO,EACPC,MAAO,UAETZ,EAAaU,QAAUG,IAASC,OAAON,GACvC,MAAMO,EAAe,CACnBN,KAAMV,EAAMW,QACZM,OAAO,EACPJ,MAAO,UAETX,EAAaS,QAAUG,IAASC,OAAOC,GAEvCf,EAAaU,QAAQO,GAAG,YAAa,CAACC,EAAK9B,KACzCc,EAAWQ,QAAU,IACpBO,GAAG,OAAQ,CAACC,EAAK9B,KACdA,EAAKO,OAASP,EAAKE,YACtBY,EAAWQ,QAAUvB,EAAkBC,MAI1Ca,EAAaS,QAAQO,GAAG,YAAa,CAACC,EAAK9B,KACzCe,EAAWO,QAAU,IACpBO,GAAG,OAAQ,CAACC,EAAK9B,KACdA,EAAKO,OAASP,EAAKE,YACtBa,EAAWO,QAAUvB,EAAkBC,MAI1CkB,EAAaI,QAAUS,YAAY,KACjC,GAAIjB,EAAWQ,UAAYN,EAAeM,SAAWP,EAAWO,UAAYL,EAAeK,QAAS,CAClG,IAAIU,EAAI,GACVA,GAAK,SAASlB,EAAWQ,QACzBU,GAAK,UAAUjB,EAAWO,QACxBW,MAAM,YAAYD,GACjBE,KAAK3C,GACL2C,KAAMlC,IACLgB,EAAeM,QAAUa,SAASnC,EAAKS,OACvCQ,EAAeK,QAAUa,SAASnC,EAAKW,SAExCyB,MAAOC,MAGV,GACC,MACF,IAGDC,cAAA,OAAKC,UAAU,MAAKC,SACnBC,eAAA,OAAKC,GAAG,WAAUF,SAAA,CACfF,cAAA,OAAKI,GAAG,QAAQC,IAAKlC,IACrB6B,cAAA,OAAKI,GAAG,QAAQC,IAAKhC,QAI7B,ECrEeiC,MAZSC,IAClBA,GAAeA,aAAuBC,UACxC,6BAAqBZ,KAAKa,IAAkD,IAAjD,OAAEC,EAAM,OAAEC,EAAM,OAAEC,EAAM,OAAEC,EAAM,QAAEC,GAASL,EACpEC,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,MCDdQ,IAASC,OACPhB,cAACiB,IAAMC,WAAU,CAAAhB,SACfF,cAAC9B,EAAG,MAENiD,SAASC,eAAe,SAM1Bd,G","file":"static/js/main.380c14b0.chunk.js","sourcesContent":["export const isResponseOk = response => {\n  if (response.ok) {\n    try {\n\t  return response.json();  \n\t} catch(ex) {\n\t  return Promise.reject(new Error('error'));  \n    }\n  }\telse {\n    return Promise.reject(new Error('error'));  \n  }\n}\n","import React, {useEffect, useRef} from 'react';\nimport { isResponseOk } from './utils.js';\nimport './App.css';\nimport nipplejs from 'nipplejs';\nimport '@forevolve/bootstrap-dark/dist/css/bootstrap-dark.min.css';\n\nconst convertNippleData = (data) => {\n  let modifier = 1;\n  if (data.direction.x === 'left' || data.direction.y === 'down') {\n    modifier = -1;\n  }\n  return Math.round(data.force * modifier * 100);\n};\n\nfunction App() {\n  const drive = useRef(null);\n  const steer = useRef(null);\n  const managerDrive = useRef(null);\n  const managerSteer = useRef(null);\n  const driveValue = useRef(0);\n  const steerValue = useRef(0);\n  const driveValuePrev = useRef(0);\n  const steerValuePrev = useRef(0);\n  const commandTimer = useRef(null);\n  \n  useEffect(() => {\n    const optionsDrive = {\n      zone: drive.current,\n      lockY: true,\n      shape: \"square\",\n    };\n    managerDrive.current = nipplejs.create(optionsDrive);\n    const optionsSteer = {\n      zone: steer.current,\n      lockX: true,\n      shape: \"square\",\n    };\n    managerSteer.current = nipplejs.create(optionsSteer);\n\n    managerDrive.current.on('start end', (evt, data) => {\n      driveValue.current = 0;\n    }).on('move', (evt, data) => {\n      if (data.force && data.direction) {\n\t      driveValue.current = convertNippleData(data);\n      }\n    });\n\n    managerSteer.current.on('start end', (evt, data) => {\n      steerValue.current = 0;\n    }).on('move', (evt, data) => {\n      if (data.force && data.direction) {\n\t      steerValue.current = convertNippleData(data);\n      }\n    });\n\n    commandTimer.current = setInterval(() => {\n      if (driveValue.current !== driveValuePrev.current || steerValue.current !== steerValuePrev.current) {\n        let q = '';\n\t\t    q += 'drive='+driveValue.current;\n\t\t    q += '&steer='+steerValue.current;\n        fetch('command/?'+q)\n        .then(isResponseOk)\n        .then((data) => {\n          driveValuePrev.current = parseInt(data.drive);\n          steerValuePrev.current = parseInt(data.steer);\n        })\n        .catch((error) => {\n\t\t      //console.log(error.message);\n\t      });\n      }\n    }, 200);\n  }, []);\n\n  return (\n    <div className=\"App\">\n\t    <div id=\"controls\">\n        <div id=\"drive\" ref={drive}></div>\n        <div id=\"steer\" ref={steer}></div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}