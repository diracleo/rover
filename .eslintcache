[{"/home/pi/rover/src/index.js":"1","/home/pi/rover/src/App.js":"2","/home/pi/rover/src/reportWebVitals.js":"3","/home/pi/rover/src/utils.js":"4"},{"size":500,"mtime":1611613270285,"results":"5","hashOfConfig":"6"},{"size":3318,"mtime":1612125344821,"results":"7","hashOfConfig":"6"},{"size":362,"mtime":1611613270285,"results":"8","hashOfConfig":"6"},{"size":237,"mtime":1612052392238,"results":"9","hashOfConfig":"6"},{"filePath":"10","messages":"11","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"12"},"1nyat6l",{"filePath":"13","messages":"14","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"15","usedDeprecatedRules":"12"},{"filePath":"16","messages":"17","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"12"},{"filePath":"18","messages":"19","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/home/pi/rover/src/index.js",[],["20","21"],"/home/pi/rover/src/App.js",["22","23","24"],"import React, {useEffect, useRef, useState} from 'react';\nimport { isResponseOk } from './utils.js';\nimport logo from './logo.svg';\nimport './App.css';\nimport nipplejs from 'nipplejs';\n//import 'bootstrap/dist/css/bootstrap.min.css';\nimport '@forevolve/bootstrap-dark/dist/css/bootstrap-dark.min.css'\nimport Button from 'react-bootstrap/Button';\nimport Form from 'react-bootstrap/Form';\n\nconst maxForce = 2.5;\nconst maxInput = 255;\nconst inputPrecision = 51;\n  \nfunction App() {\n  const left = useRef(null);\n  const right = useRef(null);\n  const leftData = useRef(0);\n  const rightData = useRef(0);\n  const leftDir = useRef(1);\n  const rightDir = useRef(1);\n  const prevLeftData = useRef(0);\n  const prevRightData = useRef(0);\n  const commandTimer = useRef(null);\n  const managerLeft = useRef(null);\n  const managerRight = useRef(null);\n  \n  const [ai, setAi] = useState(false);\n  \n  function convertToInput(value, dir) {\n    value = Math.round(value / maxForce * maxInput);\n    if (value > maxInput) {\n\t  value = maxInput;\n\t}\n\tvalue *= dir;\n\tvalue = Math.ceil(value / inputPrecision) * inputPrecision;\n\treturn value;\n  }\n  \n  useEffect(() => {\n    const optionsLeft = {\n      zone: left.current,\n      lockY: true,\n      shape: \"square\",\n    };\n    managerLeft.current = nipplejs.create(optionsLeft);\n    const optionsRight = {\n      zone: right.current,\n      lockY: true,\n      shape: \"square\",\n    };\n    managerRight.current = nipplejs.create(optionsRight);\n    \n    managerLeft.current.on('start end', (evt, data) => {\n      leftData.current = 0;\n      setAi(false);\n    }).on('move', (evt, data) => {\n\t  leftData.current = convertToInput(data.force, leftDir.current);\n    }).on('dir:up', (evt, data) => {\n      leftDir.current = 1;\n    }).on('dir:down', (evt, data) => {\n      leftDir.current = -1;\n    });\n    \n    managerRight.current.on('start end', (evt, data) => {\n      rightData.current = 0;\n      setAi(false);\n    }).on('move', (evt, data) => {\n      rightData.current = convertToInput(data.force, rightDir.current);\n    }).on('dir:up', (evt, data) => {\n      rightDir.current = 1;\n    }).on('dir:down', (evt, data) => {\n      rightDir.current = -1;\n    });\n    \n    commandTimer.current = setInterval(() => {\n      if (!ai && (leftData.current !== prevLeftData.current || rightData.current !== prevRightData.current)) {\n        let q = '';\n\t\tq += 'left='+leftData.current;\n\t\tq += '&right='+rightData.current;\n        fetch('command/?'+q)\n        .then(isResponseOk)\n        .then((data) => {\n          prevLeftData.current = parseInt(data.left);\n          prevRightData.current = parseInt(data.right);\n        })\n        .catch((error) => {\n\t\t  //console.log(error.message);\n\t    });\n      }\n    }, 200);\n    \n  }, []);\n  \n  useEffect(() => {\n    let q = 'enabled=' + (ai ? '1' : '0');\n    q += '&type=motion';\n\tfetch('ai/?'+q)\n\t.then(isResponseOk)\n\t.then((data) => {\n\t  \n\t})\n\t.catch((error) => {\n      console.log(error.message);\n\t});\n  }, [ai]);\n  \n  return (\n    <div className=\"App\">\n      <div id=\"menu\">\n\t    <Form.Check type=\"switch\" id=\"ai-switch\" label=\"AI\" checked={ai} onChange={(evt) => setAi(evt.target.checked)} />\n      </div>\n\t  <div id=\"controls\">\n        <div id=\"left\" ref={left}></div>\n        <div id=\"right\" ref={right}></div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","/home/pi/rover/src/reportWebVitals.js",[],"/home/pi/rover/src/utils.js",[],{"ruleId":"25","replacedBy":"26"},{"ruleId":"27","replacedBy":"28"},{"ruleId":"29","severity":1,"message":"30","line":3,"column":8,"nodeType":"31","messageId":"32","endLine":3,"endColumn":12},{"ruleId":"29","severity":1,"message":"33","line":8,"column":8,"nodeType":"31","messageId":"32","endLine":8,"endColumn":14},{"ruleId":"34","severity":1,"message":"35","line":93,"column":6,"nodeType":"36","endLine":93,"endColumn":8,"suggestions":"37"},"no-native-reassign",["38"],"no-negated-in-lhs",["39"],"no-unused-vars","'logo' is defined but never used.","Identifier","unusedVar","'Button' is defined but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'ai'. Either include it or remove the dependency array.","ArrayExpression",["40"],"no-global-assign","no-unsafe-negation",{"desc":"41","fix":"42"},"Update the dependencies array to be: [ai]",{"range":"43","text":"44"},[2732,2734],"[ai]"]